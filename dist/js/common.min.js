angular.module("directives",[]).directive("chart",[function(){return{restrict:"AE",template:"<div><input ng-model='line' type='checkbox' value='true'></div>",replace:!0,scope:{data:"=sourceData"},link:function(a,b,c){function d(){data=a.data;var d=c.width,e=c.height,f={top:20,right:30,bottom:30,left:60},g=d-f.left-f.right,h=e-f.top-f.bottom,i=d3.scale.ordinal().domain(data.map(function(a){return a.month}));a.line?i.rangePoints([0,g],0).range():i.rangeRoundBands([0,g],.1);var j=d3.scale.linear().domain([0,d3.max(data,function(a){return a.value})]).range([h,0]),k=d3.svg.axis().scale(i).orient("bottom"),l=d3.svg.axis().scale(j).ticks(10).tickSize(-d,0).orient("left"),m=d3.select(b[0]).append("svg").attr("width",d).attr("height",e).append("g").attr("transform","translate("+f.left+","+f.top+")");if(m.append("g").attr("class","y axis").call(l).append("text").attr("transform","rotate(-90)").attr("y",-40).attr("dy",".71em").style("text-anchor","end").text("Frequency"),a.line){var n=d3.svg.line().x(function(a){return i(a.month)}).y(function(a){return j(a.value)});m.append("path").attr("class","line").attr("d",function(){return n(data)})}else m.selectAll("rect").data(data).enter().append("g").attr("transform",function(a){return"translate("+i(a.month)+",0)"}).append("rect").attr("class","bar").attr("y",function(a){return j(a.value)}).attr("width",i.rangeBand()).attr("height",0).attr("height",function(a){return h-j(a.value)});m.append("g").attr("class","x axis").attr("transform","translate(0,"+parseInt(h)+")").call(k).append("text").attr("x",g).attr("y",8).attr("dy",".71em").style("text-anchor","middle").text("[months]")}a.$watch("data",function(b){a.data=b,b.length&&d()}),a.$watch("line",function(){b.find("svg").remove(),d()})}}}]),angular.module("filters",[]).filter("capitalize",function(){return function(a){function b(a){var b=a.toLowerCase();return b.replace(/(^| )(\w)/g,function(a){return a.toUpperCase()})}return b(a)}}),angular.module("services",[]).factory("reportsResource",["$resource",function(a){return a("https://api.mongolab.com/api/1/databases/reportsdb/collections/reports/:id",{apiKey:"qUxqL9tqS3G-MbTZLJgdH8Ob4e1Yve_p",id:"@_id.$oid"})}]);